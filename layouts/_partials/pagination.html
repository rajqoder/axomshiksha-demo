{{ $paginator := .Paginator }}
{{ if gt $paginator.TotalPages 1 }}
<nav class="pagination flex justify-center items-center gap-1 my-8"
     role="navigation"
     aria-label="Pagination">

  <a href="{{ if $paginator.HasPrev }}{{ $paginator.Prev.URL }}{{ else }}javascript:void(0){{ end }}"
     class="px-3 py-2 rounded-lg border border-main bg-muted text-main
            {{ if $paginator.HasPrev }}hover:text-blue-600 dark:hover:text-blue-400{{ end }}
            focus:outline-none focus:ring-2 focus:ring-blue-500 {{ if not $paginator.HasPrev }}opacity-50 cursor-not-allowed{{ end }}"
     aria-label="Previous page" {{ if not $paginator.HasPrev }}aria-disabled="true"{{ end }}>
    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
    </svg>
  </a>

  {{ $currentPage := $paginator.PageNumber }}
  {{ $totalPages := $paginator.TotalPages }}
  
  {{ if gt $totalPages 1 }}
    {{ $showPages := 3 }}
    {{ $firstPage := 1 }}
    {{ $lastPage := $totalPages }}
    {{ $startPage := sub $currentPage 1 }}
    {{ $endPage := add $currentPage 1 }}
    
    {{ if lt $startPage $firstPage }}
      {{ $startPage = $firstPage }}
      {{ $endPage = add $startPage $showPages }}
      {{ if gt $endPage $lastPage }}
        {{ $endPage = $lastPage }}
      {{ end }}
    {{ end }}
    
    {{ if gt $endPage $lastPage }}
      {{ $endPage = $lastPage }}
      {{ $startPage = sub $endPage $showPages }}
      {{ if lt $startPage $firstPage }}
        {{ $startPage = $firstPage }}
      {{ end }}
    {{ end }}
    
    {{ if eq $startPage 2 }}
      <a href="{{ $paginator.First.URL }}" class="px-4 py-2 rounded-lg border bg-muted border-main text-main hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500">1</a>
    {{ end }}
    
    {{ if gt $startPage 2 }}
      <a href="{{ $paginator.First.URL }}" class="px-4 py-2 rounded-lg border bg-muted border-main text-main hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500">1</a>
      <span class="px-2 py-2 text-main">...</span>
    {{ end }}
    
    {{ range $paginator.Pagers }}
      {{ $page := .PageNumber }}
      {{ if and (ge $page $startPage) (le $page $endPage) }}
        {{ if eq . $paginator }}
          <span class="px-4 py-2 rounded-lg bg-blue-600 text-white font-semibold dark:bg-blue-500" aria-current="page">{{ .PageNumber }}</span>
        {{ else }}
          <a href="{{ .URL }}" class="px-4 py-2 rounded-lg border bg-muted border-main text-main hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500">{{ .PageNumber }}</a>
        {{ end }}
      {{ end }}
    {{ end }}
    
    {{ if lt $endPage (sub $lastPage 1) }}
      <span class="px-2 py-2 text-main">...</span>
      <a href="{{ $paginator.Last.URL }}" class="px-4 py-2 rounded-lg border bg-muted border-main text-main hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500">{{ $lastPage }}</a>
    {{ end }}
    
    {{ if and (eq $endPage (sub $lastPage 1)) (gt $totalPages 2) }}
      <a href="{{ $paginator.Last.URL }}" class="px-4 py-2 rounded-lg border bg-muted border-main text-main hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500">{{ $lastPage }}</a>
    {{ end }}
  {{ end }}
  
  <a href="{{ if $paginator.HasNext }}{{ $paginator.Next.URL }}{{ else }}javascript:void(0){{ end }}"
  class="px-3 py-2 rounded-lg border bg-muted
            border-main text-main
            {{ if $paginator.HasNext }}hover:text-blue-600 dark:hover:text-blue-400{{ end }}
            focus:outline-none focus:ring-2 focus:ring-blue-500 {{ if not $paginator.HasNext }}opacity-50 cursor-not-allowed{{ end }}"
     aria-label="Next page" {{ if not $paginator.HasNext }}aria-disabled="true"{{ end }}>
    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
    </svg>
  </a>

</nav>
{{ end }}
